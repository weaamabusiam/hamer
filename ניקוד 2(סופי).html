<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="Style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Font+Name&display=swap">
</head>  

<body>
  
  <img src="Logo_PNG.png" class="logo">
  <div class="clock" style="font-family: 'Handjet', sans-serif;">00:00:00</div>
  <div class="table-container">
    <table class="center">
      <tr>
        <td id="countPlayerOne" style="font-family: 'Handjet', sans-serif;"></td>
      </tr>
    </table>
    
    <table class="center1">
      <tr>
        <td id="countPlayerTwo" style="font-family: 'Handjet', sans-serif;"></td>
      </tr>
    </table>
  </div>

  <div id="message" style="display: none;"></div>

  <audio id="winnerAudio" controls autoplay style="display: none;">
    <source src="winner_player.mp3" type="audio/mpeg">
  </audio>

  <audio id="winnerpoint" controls autoplay style="display: none;">
    <source src="WIN+1.mp3" type="audio/mpeg">
  </audio>

  <audio id="lesspoint" controls autoplay style="display: none;">
    <source src="BUZZ.mp3" type="audio/mpeg">
  </audio>


  <script>
    var countPlayerOne = 0;
    var countPlayerTwo = 0;
    var urlParams = new URLSearchParams(window.location.search);
    var playerOneName = urlParams.get("playerOne");
    var playerTwoName = urlParams.get("playerTwo");
    document.getElementById("countPlayerOne").textContent = playerOneName + ": " + countPlayerOne;
    document.getElementById("countPlayerTwo").textContent = playerTwoName + ": " + countPlayerTwo;
   function startCountdown() {
      var count = 60;
      var clockElements = document.querySelectorAll('.clock');
      var interval = setInterval(function() {
        count--;
        var seconds = count % 60;
        var minutes = Math.floor(count / 60) % 60;
        var hours = Math.floor(count / 3600);
        var time = hours.toString().padStart(2, '0') + ':' + minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
        clockElements.forEach(function(element) {
          element.textContent = time;
        });
        if (count <= 0) {
          clearInterval(interval);
          showWinnerMessage();
        }
      }, 1000);
    }
    document.addEventListener('DOMContentLoaded', startCountdown);
    var gameOver = false; // האם המשחק נגמר או לא
    document.addEventListener("keydown", function(event) {
 if (!gameOver) { // רק אם המשחק עדיין לא נגמר
      var key = event.key.toUpperCase(); // Get the pressed key in uppercase
  
     if (key === 'A') {
    countPlayerOne++;
    document.getElementById('countPlayerOne').textContent = playerOneName +':'+ countPlayerOne;
    var winnerpointAudio = document.getElementById('winnerpoint');
    winnerpointAudio.play();
  } else if (key === 'B') {
    countPlayerOne--;
    document.getElementById('countPlayerOne').textContent = playerOneName +':'+ countPlayerOne;
    var lesspoint = document.getElementById('lesspoint');
    lesspoint.play();
    } else if (key === 'C') {
    countPlayerTwo++;
    document.getElementById('countPlayerTwo').textContent = playerTwoName + ':'+ countPlayerTwo;
    var winnerpointAudio = document.getElementById('winnerpoint');
    winnerpointAudio.play();
  } else if (key === 'D') {
    countPlayerTwo--;
    document.getElementById('countPlayerTwo').textContent = playerTwoName+ ':'+ countPlayerTwo;
    var lesspoint = document.getElementById('lesspoint');
    lesspoint.play();
  }
 } 
});


function showWinnerMessage() {
  var messageElement = document.getElementById('message');
  var audioElement = document.querySelector('audio');
  gameOver = true; // המשחק נגמר
  if (countPlayerOne > countPlayerTwo) {
    messageElement.textContent = playerOneName+ "  wins!";
  } else if (countPlayerTwo > countPlayerOne) {
    messageElement.textContent = playerTwoName+"  wins!";
  } else {
    messageElement.textContent = "It's a tie!";
  }
  messageElement.style.display = "block"; // תציג את ה-DIV
  audioElement.play(); // הפעלת האודיו
}

  </script>
</body>
</html>